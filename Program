/*
 Una empresa constructora tiene varias obras en ejecución y 8 grupos de obreros que trabajan en las
obras. De cada obra se conoce el nombre y dni del propietario, código interno (se lo asigna el
sistema), tipo de obra (construcción, remodelación, ampliación, etc.), el tiempo estimado de
ejecución (expresado en días), estado de avance (porcentaje), el nro de grupo de obreros asignado a
la misma y el costo. De cada obrero se almacena su nombre y apellido, dni, nro legajo, cargo
(capataz, albañil, peón, plomero, electricista, etc.) y grupo al que pertenece. De cada grupo de
obreros se conoce el código de obra en la que están trabajando (0 en caso de no estar asignado a
ninguna obra) y los integrantes.
Se deberá desarrollar una aplicación, utilizando las clases que considere necesarias, que resuelva las
funcionalidades que se muestran en el siguiente menú:
a) Contratar un obrero nuevo (se agrega a la empresa y a un grupo)
b) Eliminar un obrero (se elimina de la empresa y de su grupo)
c) Listado de obreros
d) Listado de obras
e) Agregar una obra y asignarle un grupo de obreros. Se debe verificar que haya grupo libre; en
caso contrario se debe levantar una excepción que informe lo sucedido.
f) Modificar el estado de avance de una obra. Si el estado de avance llega al 100% la obra debe
darse por finalizada, se elimina del listado de obras en ejecución y se guarda en obras
finalizadas
g) Listado de obras finalizadas
 */
using System;

namespace TP_Final
{
	class Program
	{
		public static void Main(string[] args)
		{
			menu();//hola
			Console.ReadKey(true);
		}
			public static void menu(){
			Obrero cosa_obrero = new Obrero();
			Obra cosa_obra= new Obra();
			Constructora cosa_constructora = new Constructora();

			bool salir=false;
			string opcion;
			
			
			while (!salir){
				
				Console.WriteLine("************************************");
				Console.WriteLine("elija una de las siguientes opciones:");
				Console.WriteLine("************************************");
				Console.WriteLine("a) Contratar un obrero nuevo ");
				Console.WriteLine("b) Eliminar un obrero ");
				Console.WriteLine("c) Listado de obreros ");
				Console.WriteLine("d) Listado de obras ");
				Console.WriteLine("e) Agregar una obra y asignarle un grupo de obreros.");
				Console.WriteLine("f) Modificar el estado de avance de una obra. ");
				Console.WriteLine("g) Listado de obras finalizadas ");
                Console.WriteLine("h) Salir.");
				Console.WriteLine("************************************");
				opcion=Console.ReadLine();
				switch(opcion){
					case "a":
						Console.Clear();
						Console.WriteLine("Agregar un nuevo obrero:");
        				Console.Write("Nombre: ");
        				string nombre = Console.ReadLine();
        				Console.Write("Apellido: ");
        				string apellido = Console.ReadLine();
        				Console.Write("DNI: ");
        				string dni = Console.ReadLine();
       					Console.Write("Número de legajo: ");
        				int nroLegajo = int.Parse(Console.ReadLine());
        				Console.Write("Cargo: ");
        				string cargo = Console.ReadLine();

        				cosa_constructora.AgregarObrero(nombre, apellido, dni, nroLegajo, cargo);

						break;
					case "b":
					Console.Clear();
				
           				Console.WriteLine("Ingrese el dni del usuario que quiera eliminar: ");
            			int elimi_dni = int.Parse(Console.ReadLine());
            			bool elimi = false;
            			while (elimi == false)
            			{
                			foreach (Obrero o in obrero)
                			{	
                				if (o.dni == elimi_dni)
                    			{
                    			    obrero.Remove(o);
                    			    Console.WriteLine("eliminado exitosamente.");
                    			    elimi = true;
                    			    break;
                    			}
                	
                    
                			}
                			if(!elimi){
                			Console.WriteLine("ese dni no existe en la base de datos,intente nuevamente.");
                			break;
                			}
                
						}
                        break;
                    case "c":
					Console.Clear();
					cosa_obrero.Mostrar_Obrero();
						break;
                    case "d":
					Console.Clear();
					cosa_obra.Mostrar_Obras();
						
						break;
                    case "e":
					Console.Clear();
					Console.WriteLine("ingrese nombre del dueño. ");
					nombreDeDuenio= Console.ReadLine();
					Console.WriteLine("ingrese dni del dueño");
					dniDeDuenio=int.Parse(Console.ReadLine());
					Console.WriteLine("ingrese tipo de obra a contruir. ");
					Tipodeobra=Console.ReadLine();
					Console.WriteLine("ingrese tiempo estimado de ejecucion. ");
					TEEjecucion=Console.ReadLine();
					Console.WriteLine("ingrese costo de la obra. ");
					costo=double.Parse(Console.ReadLine());
					Console.WriteLine("ingrese numero del grupo asignado a la obra.");
					Grupo= int.Parse(Console.ReadLine());
					cosa_constructora.AgregarObra(nombreDeDuenio,dniDeDuenio,Tipodeobra,TEEjecucion,costo,Grupo);
					
					
                    case "f":
					Console.Clear();
						
						break;
                    case "g":
					Console.Clear();
						
						break;
                    case "h":
					Console.Clear();

                    salir=true;
					 Thread.Sleep(2000);
						
						break;
					 default:
                        Console.Clear();
                        Console.WriteLine("La opcion ingresada es inexistente, por favor trate de nuevo." + " " + "Espere a que reaparezca el menu.");
                        Thread.Sleep(2000);
                        Console.Clear();
                        break;                   
				}
			}
		}
			
			
		}
	}

